speak:
  alias: Make speach announcement on smart speaker
  fields:
    message:
      description: This message will be spoken as announcement
    messages:
      description: One of these messages will be randomly picked for announcement
  variables:
    announcement: "{{ message or (messages | random) }}"
  sequence:
    # Announce on speaker only when someone is home
    - choose:
      - conditions:
        - condition: state
          entity_id: group.family
          state: 'home'
        - condition: state
          entity_id: input_boolean.do_not_disturb
          state: 'off'
        sequence:
          - service: tts.google_say
            data:
              entity_id: media_player.google_home_mini
              message: "{{ announcement }}"

announcement:
  alias: Send a push-notification and make an announcement on smart speaker
  fields:
    title:
      description: A title for a push-notification
    messages:
      description: One of these messages will be randomly picked for announcement
  variables:
    message: "{{ messages | random }}"
  sequence:
    - service: notify.all
      data:
        title: "{{ title }}"
        message: "{{ message }}"
    - service: script.speak
      data:
        message: "{{ message }}"

greeting:
  alias: Greet people upon their arrival
  variables:
    greeting: >-
      {{ [
        "Привіт!",
        "Вітаю!",
        "Вітаю вдома!",
        "Без вас було сумно!",
        "Ласкаво прошу додому!",
        "Нарешті ви вдома!",
        "Ви вдома!",
        "Хелоу, котики!",
        "Моя сім’я вдома!",
        "Мої котики вдома!",
        "Кошенята вдома!"
      ] | random }}
    day_phrase: >-
      {{ [
        "Як проходить ваш день?",
        "Вдалого дня!",
        "Ваш дім скучив за вами!",
        "Немає місця, милішого за рідний дім.",
        "Люблю вас! Ви теж любіть один одного!",
        "Що нового?",
        "Як справи?",
      ] | random }}
    night_phrase: >-
      {{ [
        "Як пройшов ваш день?",
        "Що нового?",
        "Люблю вас! Ви теж любіть один одного!",
        "Приємного і затишного вечора!",
        "Затишного вечора!",
        "Теплого вечора!",
        "Приємного вечора!",
        "Класного вечора!",
        "Насолоджуйтесь вечором!",
        "Поцілуйте один одного!",
        "Не забудьте обійняти один одного!",
        "Поділіться один з одним теплом",
        "Що цікавого сталось сьогодні?",
        "Що хорошого сталось за сьогодні?"
      ] | random }}
  sequence:
    - choose:
      - conditions:
          - condition: state
            entity_id: sun.sun
            state: 'above_horizon'
        sequence:
          - service: tts.google_say
            data:
              entity_id: media_player.google_home_mini
              message: "{{ greeting + day_phrase }}"
      - conditions:
          - condition: state
            entity_id: sun.sun
            state: 'below_horizon'
        sequence:
          - service: tts.google_say
            data:
              entity_id: media_player.google_home_mini
              message: "{{ greeting + night_phrase }}"
      default:
        - service: script.speak
          data:
            message: "{{ greeting }}"
