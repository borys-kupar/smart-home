- id: home_assistant_release_alert
  alias: Home Assistant Release Alert
  trigger:
    - platform: state
      entity_id: binary_sensor.updater
  action:
    service: notify.denys
    data:
      title: '–û–Ω–æ–≤–ª–µ–Ω–Ω—è Home Assistant üéâ'
      message: "–î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å—ñ—è Home Assistant {{ state_attr('binary_sensor.updater', 'newest_version') }}."
      data:
        url: /hassio/dashboard

- id: aqi_alert
  alias: AQI Alert
  mode: single
  trigger:
    - platform: numeric_state
      entity_id: sensor.nyvky_aqi
      above: 150
      below: 200
      for:
        minutes: 30
    - platform: numeric_state
      entity_id: sensor.nyvky_aqi
      above: 201
      below: 300
      for:
        minutes: 30
    - platform: numeric_state
      entity_id: sensor.nyvky_aqi
      above: 301
      for:
        minutes: 30
  action:
    - choose:
        - conditions:
            - condition: numeric_state
              entity_id: sensor.nyvky_aqi
              above: 150
              below: 200
          sequence:
            - service: script.announcement
              data:
                title: '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è ü•¥'
                greetings:
                  - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è –Ω–∞–¥–≤–æ—Ä—ñ: {{ trigger.to_state.state | int }}¬†AQI'
                  - '–®–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '{{ trigger.to_state.state | int }}¬†AQI.'
                messages:
                  - '–ú–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–∏—Ö–∞–Ω–Ω—ñ.'
                  - '–°–ø—Ä–∏—á–∏–Ω—è—î –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –ø—Ä–∏ –¥–∏—Ö–∞–Ω–Ω—ñ —É –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π.'
                  - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
                  - '–ó–∞–Ω—è—Ç—Ç—è —Å–ø–æ—Ä—Ç–æ–º –Ω–∞ –≤—É–ª–∏—Ü—ñ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ.'
        - conditions:
            - condition: numeric_state
              entity_id: sensor.nyvky_aqi
              above: 201
              below: 300
          sequence:
            - service: script.announcement
              data:
                title: '–î—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è üò∑'
                greetings:
                  - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '–ù–∞–¥–≤–æ—Ä—ñ –¥—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - "–î—É–∂–µ —à–∫—ñ–¥–ª–∏–≤–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ states('sensor.nyvky_aqi') | int }}¬†AQI"
                  - '{{ trigger.to_state.state | int }}¬†AQI.'
                messages:
                  - '–ú–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è —É –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π –ø—Ä–∏ —Ç—Ä–∏–≤–∞–ª–æ–º—É –≤–ø–ª–∏–≤—ñ.'
                  - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
                  - '–†–∏–∑–∏–∫ —ñ–Ω—Å—É–ª—å—Ç—É —Ç–∞ —ñ–Ω—Ñ–∞—Ä–∫—Ç—É —É –ª—é–¥–µ–π –ø–æ—Ö–∏–ª–æ–≥–æ –≤—ñ–∫—É.'
                  - '–ó–∞–Ω—è—Ç—Ç—è —Å–ø–æ—Ä—Ç–æ–º –Ω–∞ –≤—É–ª–∏—Ü—ñ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ.'
        - conditions:
            - condition: numeric_state
              entity_id: sensor.nyvky_aqi
              above: 301
          sequence:
            - service: script.announcement
              data:
                title: '–ù–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è ‚ò†Ô∏è'
                greetings:
                  - '–†—ñ–≤–µ–Ω—å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '–ù–∞–¥–≤–æ—Ä—ñ –Ω–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '–ù–µ–±–µ–∑–ø–µ—á–Ω–µ –ø–æ–≤—ñ—Ç—Ä—è: {{ trigger.to_state.state | int }}¬†AQI'
                  - '{{ trigger.to_state.state | int }}¬†AQI.'
                messages:
                  - '–¶–µ –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –∑–¥–æ—Ä–æ–≤‚Äô—è!'
                  - '–ó–∞–ª–∏—à–∞–π—Ç–µ—Å—å –≤–¥–æ–º–∞!'
                  - '–ù–µ –≤–∏—Ö–æ–¥—å—Ç–µ –Ω–∞ –≤—É–ª–∏—Ü—é!'
                  - '–ó–∞—á–∏–Ω—ñ—Ç—å –≤—ñ–∫–Ω–∞!'
                  - '–°–µ—Ä–π–æ–∑–Ω–∏–π –≤–ø–ª–∏–≤ –Ω–∞–≤—ñ—Ç—å –Ω–∞ –∑–¥–æ—Ä–æ–≤–∏—Ö –ª—é–¥–µ–π!'
                  - "–ú–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ —Å–µ—Ä–π–æ–∑–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏ –¥–ª—è –∑–¥–æ—Ä–æ–≤'—è!"
                  - '–õ—é–¥—è–º —ñ–∑ –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω–Ω—è–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –ø–µ—Ä–µ–±—É–≤–∞—Ç–∏ –Ω–∞ –≤—É–ª–∏—Ü—ñ.'
                  - '–Ü—Å–Ω—É—î —Ä–∏–∑–∏–∫ —ñ–Ω—Å—É–ª—å—Ç—É —Ç–∞ —ñ–Ω—Ñ–∞—Ä–∫—Ç—É!'
                  - '–ù–µ–≥–∞—Ç–∏–≤–Ω—ñ –Ω–∞—Å–ª—ñ–¥–∫–∏ –Ω–∞–≤—ñ—Ç—å –ø—ñ–¥ —á–∞—Å –ª–µ–≥–∫–æ—ó –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ!'
      default:
        - service: script.announcement
          data:
            title: '–ü–æ–≤—ñ—Ç—Ä—è üå´'
            messages:
              - "–ü–æ–≥—ñ—Ä—à—É—î—Ç—å—Å—è —è–∫—ñ—Å—Ç—å –ø–æ–≤—ñ—Ç—Ä—è: {{ states('sensor.nyvky_aqi') | int }}¬†AQI"
            notify_data:
              url: /lovelace/home
    - delay:
        hours: 2

# Disabled because there's no transmission integration enabled right now.
- id: torrent_completed_notification
  alias: Notify about completed torrent
  initial_state: false
  trigger:
    platform: event
    event_type: transmission_downloaded_torrent
  action:
    - service: notify.all
      data:
        title: 'Transmission ‚¨áÔ∏è'
        message: '{{trigger.event.data.name}} –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!'

- id: unavailable_devices_notifications
  alias: Unavailable Devices Alert
  trigger:
    - platform: time_pattern
      minutes: /1
  condition:
    - condition: state
      entity_id: group.family
      state: home
    - condition: state
      entity_id:
        # Lights
        - light.desk_lamp
        - light.bedroom_bed_lights
        - light.bedroom_ceiling_light_light
        - light.bedroom_floor_lamp
        - light.living_room_tv_lights
        - light.living_room_main_light
        - light.living_room_lower_table_light
        - light.living_room_upper_table_light
        # Media Players
        - media_player.playstation_4
        - media_player.samsung_tv
        - media_player.living_room_speaker
        - media_player.bedroom_speaker
        - media_player.spotify_denys
        - media_player.spotify_marry
        # Fans
        - fan.purifier
        - fan.humidifier
      state: unavailable
      for:
        minutes: 2
  action:
    - service: script.announcement
      data:
        speak: false
        title: '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π üîå'
        greetings:
          - '–ü—Ä–∏—Å—Ç—Ä—ñ–π {{ trigger.to_state.name }} –≤—Ç—Ä–∞—Ç–∏–≤ –∑‚Äô—è–∑–æ–∫ –∑ —Ä–æ–∑—É–º–Ω–∏–º –¥–æ–º–æ–º!'
          - '{{ trigger.to_state.name }} –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π!'
          - '–ó–Ω–∏–∫ –∑–≤‚Äô—è–∑–æ–∫ –∑ {{ trigger.to_state.name }}!'
          - '–í—Ç—Ä–∞—Ç–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é {{ trigger.to_state.name }}!'
        messages:
          - '–°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –π–æ–≥–æ.'
          - '–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –π–æ–≥–æ.'
          - '–ü–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –∞–±–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å –π–æ–≥–æ.'
          - '–°–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏.'

- id: car_washing_alert
  alias: Car Washing Alert
  trigger:
    - platform: state
      entity_id: binary_sensor.car_wash
  action:
    - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.car_wash
              state: 'on'
          sequence:
            - service: script.announcement
              data:
                speak: false
                title: '–ú–∏—Ç—Ç—è –∞–≤—Ç–æ üöò‚òÄÔ∏è'
                greetings:
                  - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –æ—á—ñ–∫—É—î—Ç—å—Å—è —Ö–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞.'
                  - '–•–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 7 –¥–Ω—ñ–≤.'
                  - '–ü—Ä–æ–≥–Ω–æ–∑—É—î—Ç—å—Å—è —Ö–æ—Ä–æ—à–∞ –ø–æ–≥–æ–¥–∞!'
                  - '–ü–æ–ø–µ—Ä–µ–¥—É –≥–∞—Ä–Ω–∞ –ø–æ–≥–æ–¥–∞!'
                messages:
                  - '–î–æ—Ä–µ—á–Ω–æ –ø–æ–º–∏—Ç–∏ –º–∞—à–∏–Ω—É.'
                  - '–ú–æ–∂–Ω–∞ –ø–æ–º–∏—Ç–∏ –∞–≤—Ç–æ.'
                  - '–í–∞—Ä—Ç–æ –ø–æ—ó—Ö–∞—Ç–∏ –Ω–∞ –∞–≤—Ç–æ–º–∏–π–∫—É.'
                  - '–í–¥–∞–ª–∏–π —á–∞—Å, —â–æ–± –ø–æ–º–∏—Ç–∏ –∞–≤—Ç–æ.'
                notify_data:
                  url: /lovelace/car
        - conditions:
            - condition: state
              entity_id: binary_sensor.car_wash
              state: 'off'
          sequence:
            - service: script.announcement
              data:
                speak: false
                title: '–ú–∏—Ç—Ç—è –∞–≤—Ç–æ üöòüåß'
                greetings:
                  - '–ù–∞–π–±–ª–∏–∂—á–∏–º–∏ –¥–Ω—è–º–∏ –æ—á—ñ–∫—É—î—Ç—å—Å—è –ø–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞.'
                  - '–ü–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞ –Ω–∞–π–±–ª–∏–∂—á—ñ 7 –¥–Ω—ñ–≤.'
                  - '–ü—Ä–æ–≥–Ω–æ–∑—É—î—Ç—å—Å—è –ø–æ–≥–∞–Ω–∞ –ø–æ–≥–æ–¥–∞!'
                  - '–ü–æ–ø–µ—Ä–µ–¥—É –¥–æ—â–æ–≤–∞ –ø–æ–≥–æ–¥–∞!'
                messages:
                  - '–£—Ç—Ä–∏–º–∞–π—Ç–µ—Å—å –≤—ñ–¥ –º–∏—Ç—Ç—è –∞–≤—Ç–æ.'
                  - '–ù–µ –≤–∞—Ä—Ç–æ –º–∏—Ç–∏ –∞–≤—Ç–æ —Ü–∏–º–∏ –¥–Ω—è–º–∏.'
                  - '–ö—Ä–∞—â–µ –∑–∞–ª–∏—à–∏—Ç–∏ –∞–≤—Ç–æ –±—Ä—É–¥–Ω–∏–º.'
                notify_data:
                  url: /lovelace/car
